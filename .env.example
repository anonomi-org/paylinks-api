# Anonomi Paylinks API - Environment Configuration
# Copy this file to .env and fill in the values

# Server
PORT=8787
HOST=0.0.0.0
# Docker bind address for the API port (default: 127.0.0.1)
# Set to specific IP if needed (e.g., WireGuard IP for remote access)
BIND_ADDRESS=127.0.0.1

# Database (PostgreSQL)
# For Docker Compose, set POSTGRES_PASSWORD and DATABASE_URL is constructed automatically
# For external DB, set DATABASE_URL directly
POSTGRES_PASSWORD=
DATABASE_URL=postgres://paylinks:${POSTGRES_PASSWORD}@db:5432/paylinks

# CORS - Comma-separated list of allowed origins
# In development, you can use "*" to allow all origins
# In production, this MUST be set to your actual domains
ALLOWED_ORIGINS=https://paylinks.anonomi.org,https://anonomi.org

# Allow null origin - ONLY for Tor deployments
# Tor Browser sends "null" as the Origin header for privacy.
# Set to "true" only on Tor hidden service deployments.
# ALLOW_NULL_ORIGIN=true

# Donate page base URL - REQUIRED in production
# The paylink ID will be appended as a fragment (e.g., https://example.org/donate#<id>)
# For Tor: http://your-onion-address.onion/paylinks/d#
DONATE_BASE_URL=https://anonomi.org/paylinks/d#

# Encryption - REQUIRED
# 32-byte key encoded as base64 for AES-256-GCM encryption of private view keys
# Generate with: openssl rand -base64 32
PAYLINKS_MASTER_KEY_B64=

# Fingerprint HMAC key - REQUIRED in production
# Used to generate paylink fingerprints for verification
# Any string >= 16 characters. Generate with: openssl rand -hex 32
PAYLINKS_FINGERPRINT_KEY=

# Environment
# Set to "production" in production to enable strict validation
NODE_ENV=development
